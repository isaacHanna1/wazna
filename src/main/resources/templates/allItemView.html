<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
     <title>Items Market</title>
    <link th:href="@{/css/styles.css}" rel="stylesheet" />
</head>
<body>
   <!-- Toast Container -->
    <div id="toast-container" class="toast-container"></div>
  <!-- Include the navbar fragment -->
  <div th:insert="~{fragments/navbar :: mainNavbar}"></div>
  <div class="container">
      <h2 class="el-messiri heading text-center color-primary" >All Items </h2>
      <form th:action="@{/market/item/all/findItem}" th:method="GET" class="form-element flex flex-mob   flx-wrap space-between">
        <div class="mar-bottom-5px flex ">
          <div>
            <label for="itemName" class="width-120px label">Item Name: </label>
          </div>
          <div class="pos-relative  ">
            <input type="Text" id="itemName" name="itemName" autocomplete="off" placeholder="Item Name or Description " class="input width-250 " required />
            <ul id="hiddenAutoCompleteList" class="dis_none">          
         </ul>
          </div>
        </div>
        <div>
          <button type="submit" class="btn-no-width btn-primary">Filter</button>
        </div>
        <input type="hidden"  th:value="${pageNum}"  name="pageNum"/>
        <input type="hidden"  th:value="${pageSize}"  name="pageSize"/>
        <input type="hidden" value="" name="itemId" id="itemId"  />
      </form>
      <form  th:action="@{/qr/update}" method="post">
        <table class="table mar-bottom-5px">
          <h3 class="color-primary pad-10px">Market Items</h3>
          <thead>
            <tr>
              <th class="mob-hid" >SNo</th>
              <th>Item Name</th>
              <th>Item Description</th>
              <th>Wazna Point</th>
              <th>active</th>
            </tr>
          </thead>
          <tbody>
           <tr th:each="item, iterStat : ${items}">
              <td th:text="${iterStat.index + 1}" class="mob-hid">1</td>
              <td th:text="${item.itemName}"></td>
              <td th:text="${item.itemDesc}"></td>
              <td th:text="${item.points}"></td>
              <td>
                <input th:if="${item.status == true}" checked type="checkbox" th:name = "'status-'+${iterStat.index}" th:id = "'status-'+${iterStat.index}" th:value="${item.status}" onclick="changeStatus(this);">
                <input th:unless="${item.status == true}"     type="checkbox" th:name = "'status-'+${iterStat.index}" th:id = "'status-'+${iterStat.index}" th:value="${item.status}" onclick="changeStatus(this);">
              </td>
              <input type="hidden"        th:name = "'id-'+${iterStat.index}"     th:id = "'id-'+${iterStat.index}" th:value="${item.id}"/>
            </tr>
          </tbody>
        </table>
          <input type="hidden"  th:value="${start}"      name="fromDate"/>
          <input type="hidden"  th:value="${end}"        name="toDate"/>
          <input type="hidden"  th:value="${numOfPages}" name="numOfPages"/>
          <div class="pad-10px">
          <button type="button" onclick="exceute(this)" class="btn-no-width btn-primary">Execute</button>
        </div>
  </form>
</div>
<div class="pagination pad-10px flex just-con-center"   th:if="${numOfPages > 1}">
  <ul class="pagination-list flex gap-5 ul-list-style-none ">
    <li th:each="pageNum : ${#numbers.sequence(1, numOfPages)}">
      <a th:href="@{/market/item/all(pageNum=${pageNum},pageSize=${pageSize})}"
         th:classappend="${pageNum == currentPage} ? 'active-page'"
         class="pagination-link">
        <span th:text="${pageNum}">1</span>
      </a>
    </li>
  </ul>
</div>
<script th:src="@{/js/nav.js}"></script>
<script th:src="@{/js/jCommon/Common.js}"></script>
<script th:src="@{/js/allItemView.js}"></script>
</body>
</html>