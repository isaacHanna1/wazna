<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>WAZNA - Edit Profile</title>
  <link th:href="@{../css/styles.css}" rel="stylesheet" />

</head>
<body>
<!-- Include the navbar fragment -->
<div th:insert="~{fragments/navbar :: mainNavbar}"></div>
<div class="auth-container">
  <div class="auth-form">
    <h2 class="auth-title">Update Data</h2>
    <form
            id="register-form"
            class="space-y-4"
            enctype="multipart/form-data"
            th:action="@{'/editProfile/' + ${profile.id}}"
            th:object="${profile}"
            method="POST"
    >
      <div class="form-group">
        <label for="firstName" class="form-label"> First Name </label>
        <input
                id		   = "firstName"
                name     = "firstName"
                th:field = "*{firstName}"
                type="text"
                class="form-input"
                placeholder="Enter Your First Name"
        />
        <span th:if="${#fields.hasErrors('firstName')}" th:errors="*{firstName}" class="error-message"></span>
        <span id="fName-err" class="error-message"></span>
      </div>
      <div class="form-group">
        <label for="lastName" class="form-label"> Last Name </label>
        <input
                id="lastName"
                name="lastName"
                th:field="*{lastName}"
                type="text"
                class="form-input"
                placeholder="Enter Your last Name"
        />
        <span th:if="${#fields.hasErrors('lastName')}" th:errors="*{lastName}" class="error-message"></span>
        <span id="lName-err" class="error-message"></span>
      </div>

      <div class="form-group">
        <label for="gender" class="form-label"> Gender </label>
        <select
                id="gender"
                name="gender"
                th:field="*{gender}"
                 
                class="form-input">
          <option value=""    >Select</option>
          <option value="Male">Male</option>
          <option value="Female">Female</option>
        </select>
        <span th:if="${#fields.hasErrors('gender')}" th:errors="*{gender}" class="error-message"></span>
        <span id="gender-err" class="error-message"></span>
      </div>

      <div class="form-group">
        <label for="phone" class="form-label"> phone </label>
        <input
                id="phone"
                name="phone"
                th:field="*{phone}"
                type="tel"
                 
                class="form-input"
                placeholder="Enter Your Phone"
        />
        <span th:if="${#fields.hasErrors('phone')}" th:errors="*{phone}" class="error-message"></span>
        <span id="phone-err" class="error-message"></span>
      </div>

      <div class="form-group">
        <label for="dioceses" class="form-label">Select dioceses (الإيبارشية)</label>
        <select id = "dioceses" name="dioceses.id"   class="form-input">
              <option value="" disabled>Select dioceses (الإيبارشية)</option>
            <option th:each="d : ${dioceses}"
                    th:value="${d.id}"
                    th:text="${d.name}"
                    th:selected="${profile.dioceses != null} ? ${profile.dioceses.id} == ${d.id} : false">
            </option>
        </select>
        <span th:if="${#fields.hasErrors('dioceses')}" th:errors="*{dioceses}" class="error-message"></span>
        <span id="dioceses-err" class="error-message"></span>
      </div>
        <div class="form-group">
          <label for="Church" class="form-label">Church</label>
          <select id = "Church" name="church.id"   class="form-input">
             <option th:each="c : ${church}"
                  th:value    = "${c.id}"
                  th:text     = "${c.churchName}"
                  th:selected = "${profile.church != null and profile.church.id == c.id}">
          </option>
          </select>
          <span th:if="${#fields.hasErrors('church')}" th:errors="*{church}" class="error-message"></span>
          <span id="church-err" class="error-message"></span>
       </div>
      <div class="form-group">
        <label for="meeting" class="form-label">Meeting</label>
        <select id="meeting" name="meetings.id" class="form-input" >
            <option th:each="m : ${meeting}"
                  th:value="${m.id}"
                  th:text="${m.description}"
                  th:selected="${profile.meetings != null and profile.meetings.id == m.id}">
          </option>
        </select>
        <span th:if="${#fields.hasErrors('meetings')}" th:errors="*{meetings}" class="error-message"></span>
        <span id="meetings-err" class="error-message"></span>
      </div>

      <div class="form-group">
        <label for="fatherPeriest" class="form-label">
          Father Periest</label
        >
        <select id="fatherPeriest" name="priest.id" class="form-input">
          <option  th:each="p :${priests}" th:value="${p.id}"
                  th:text="${p.name}"
                   th:selected="${p != null and profile.priest.id == p.id}">
          </option>
        </select>
        <span th:if="${#fields.hasErrors('priest')}" th:errors="*{priest}" class="error-message"></span>
        <span id="father-err" class="error-message"></span>
      </div>

        <div class="form-group">
        <label for="serviceStage" class="form-label">Stage</label>
        <select id = "serviceStage" name="serviceStage.id"   class="form-input">
          <option value=""  disabled>Select stage</option>
          <option th:each="stage : ${stages}"
                  th:value="${stage.id}"
                  th:text="${stage.description}">
          </option>
        </select>
        <span th:if="${#fields.hasErrors('serviceStage')}" th:errors="*{serviceStage}" class="error-message"></span>
        <span id="stage-err" class="error-message"></span>
      </div>

      <div class="form-group">
        <label for="birthday" class="form-label"> Birth Day</label>
        <input
                id="birthday"
                name="birthday"
                type="date"
                th:field="*{birthday}"
                class="form-input"
        />
        <span th:if="${#fields.hasErrors('birthday')}" th:errors="*{birthday}" class="error-message"></span>
        <span id="birthday-err" class="error-message"></span>
      </div>

      <div class="form-group">
        <label for="address" class="form-label"> Address</label>
        <input
                id="address"
                name="address"
                type="text"
                th:field="*{address}"
                 
                class="form-input"
                placeholder="Enter Full Address"
        />
        <span th:if="${#fields.hasErrors('address')}" th:errors="*{address}" class="error-message"></span>
        <span id="address-err" class="error-message"></span>

      </div>
      <div class="form-group">
        <label for="image" class="form-label"> Select new image only if you want to replace the current one: </label>
        <input
                id="image"
                name="image"
                type="file"

                class="form-input"
                placeholder="Image Profile"
                accept="image/*"
        />
        <span th:if="${#fields.hasErrors('profileImagePath')}" th:errors="*{profileImagePath}" class="error-message"></span>
        <span id="image-err" class="error-message"></span>

      </div>
      <div style="padding-top: 0.5rem">
        <input type="submit" value ="Edit Profile" class="btn btn-primary">
      </div>
      <input type="hidden" id="mode" value="edit">
    </form>
    <div th:if="${globalError}" class="error-message">
      <p th:text="${globalError}"></p>
    </div>
  </div>
</div>
<script th:src="@{/js/nav.js}"></script>
<script th:src="@{/js/jCommon/Common.js}"></script>
<script th:src="@{/js/register.js}"></script>
</body>
</html>
